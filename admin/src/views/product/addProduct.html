<!-- #section:basics/content.breadcrumbs -->
<div class="breadcrumbs" id="breadcrumbs">
    <script type="text/javascript">
        try {
            ace.settings.check('breadcrumbs', 'fixed')
        } catch (e) {}
    </script>

    <ul class="breadcrumb">
        <li>
            <i class="ace-icon fa fa-home home-icon"></i>
            <a href="#">首页</a>
        </li>
        <li class="active">产品</li>
    </ul>
    <!-- /.breadcrumb -->
</div>

<!-- /section:basics/content.breadcrumbs -->
<div class="page-content">
    <div class="page-header">
        <h1>
                        产品
                        <small>
                            <i class="ace-icon fa fa-angle-double-right"></i>
                            产品列表
                        </small>
                        <small>
                            <i class="ace-icon fa fa-angle-double-right"></i>
                            添加产品
                        </small>
                    </h1>
    </div>
    <!-- /.page-header -->

    <div class="row" ng-controller="addProductCtrl">
        <div class="col-xs-12">
            <form class="form-horizontal" role="form" ng-submit="addProForm()">
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品名称: </label>

                    <div class="col-sm-9">
                        <input type="text" id="form-field-1" placeholder="产品名称" class="col-xs-10 col-sm-5" value="" ng-model="formData.goodsName">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品类别: </label>

                    <div class="col-sm-9 fix-input">
                        <label>
                            <input type="radio" name="gtype" ng-model="formData.gtype" ng-value="1">
                            <span>珠宝成品</span>
                        </label>
                        <label>
                            <input type="radio" name="gtype" ng-model="formData.gtype" ng-value="2">
                            <span>珠宝定制</span>
                        </label>

                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品编号: </label>

                    <div class="col-sm-9">
                        <input type="text" id="form-field-2" placeholder="产品编号" class="col-xs-10 col-sm-5" value="" ng-model="formData.goodsSn">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 市场价格(￥): </label>

                    <div class="col-sm-9">
                        <input type="number" step="0.01" id="form-field-3" placeholder="市场价格" class="col-xs-10 col-sm-5" value="" ng-model="formData.marketPrice">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 销售价格(￥): </label>

                    <div class="col-sm-9">
                        <input type="number" step="0.01" id="form-field-4" placeholder="销售价格" class="col-xs-10 col-sm-5" value="" ng-model="formData.price">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 主钻数量: </label>

                    <div class="col-sm-9">
                        <input type="number" step="0.01" id="form-field-4" placeholder="主钻数量" class="col-xs-10 col-sm-5" value="" ng-model="formData.zdiaNum">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 副钻数量: </label>

                    <div class="col-sm-9">
                        <input type="number" step="0.01" id="form-field-4" placeholder="副钻数量" class="col-xs-10 col-sm-5" value="" ng-model="formData.fdiaNum">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 主钻重量: </label>

                    <div class="col-sm-9">
                        <input type="number" step="0.01" id="form-field-4" placeholder="主钻重量" class="col-xs-10 col-sm-5" value="" ng-model="formData.zdiaWeight">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 副钻重量: </label>

                    <div class="col-sm-9">
                        <input type="number" step="0.01" id="form-field-4" placeholder="副钻重量" class="col-xs-10 col-sm-5" value="" ng-model="formData.fdiaWeight">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 总重: </label>

                    <div class="col-sm-9">
                        <input type="number" step="0.01" id="form-field-4" placeholder="总重" class="col-xs-10 col-sm-5" value="" ng-model="formData.goodsWeight">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 是否现货: </label>

                    <div class="col-sm-9 fix-input">
                        <label>
                            <input type="radio" name="isSpot" ng-model="formData.isSpot" ng-value="1">
                            <span>是</span>
                        </label>
                        <label>
                            <input type="radio" name="isSpot" ng-model="formData.isSpot" ng-value="0">
                            <span>否</span>
                        </label>
                    </div>


                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品库存: </label>

                    <div class="col-sm-9">
                        <input type="number"  id="form-field-4" placeholder="产品库存" class="col-xs-10 col-sm-5" value="" ng-model="formData.stock">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品分类: </label>

                    <div class="col-sm-9">
                        <select
                            ng-model="formData.cateId">
                            <option ng-repeat="item in productCatLits" value="{{item.cateId}}">{{item.cateName}}</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品形状: </label>

                    <div class="col-sm-9">
                        <select class="" name="zdiaShape"
                            ng-model="formData.zdiaShape"
                            ng-init="formData.zdiaShape='ROUND'">
                            <option value="ROUND">圆形</option>
                            <option value="OVAL">椭圆</option>
                            <option value="MARQUIS">马眼</option>
                            <option value="HEART">心形</option>
                            <option value="PEAR">水滴</option>
                            <option value="PRINCESS">方形</option>
                            <option value="EMERALD">祖母绿</option>
                            <option value="CUSHION">枕形</option>
                            <option value="RADIANT">蕾蒂恩</option>
                            <option value="BAGUETTE ">梯方</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品颜色: </label>

                    <div class="col-sm-9">
                        <select class="" name="diaColor"
                            ng-model="formData.diaColor"
                            ng-init="formData.diaColor='D'">
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                            <option value="H">H</option>
                            <option value="I">I</option>
                            <option value="J">J</option>
                            <option value="K">K</option>
                            <option value="L">L</option>
                            <option value="M ">M</option>
                            <option value="N ">N</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品净度: </label>

                    <div class="col-sm-9">
                        <select class="" name="diaJd"
                            ng-model="formData.diaJd"
                            ng-init="formData.diaJd='FL'">
                            <option value="FL">FL</option>
                            <option value="IF">IF</option>
                            <option value="WS1">WS1</option>
                            <option value="WS2">WS2</option>
                            <option value="VS1">VS1</option>
                            <option value="VS2">VS2</option>
                            <option value="SI1">SI1</option>
                            <option value="SI2">SI2</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品切工: </label>

                    <div class="col-sm-9">
                        <select class="" name="diaQg"
                            ng-model="formData.diaQg"
                            ng-init="formData.diaQg='EX'">
                            <option value="EX">EX</option>
                            <option value="VG">VG</option>
                            <option value="G">G</option>
                            <option value="Fair">Fair</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品证书: </label>

                    <div class="col-sm-9">
                        <select class="" name="goodsId"
                            ng-model="formData.certificate"
                            ng-init="formData.certificate='GIA'">
                            <option value="GIA">GIA</option>
                            <option value="HRD">HRD</option>
                            <option value="IGI">G</option>
                            <option value="国检">国检</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品抛光: </label>

                    <div class="col-sm-9">
                        <select class="" name="polish"
                            ng-model="formData.polish"
                            ng-init="formData.polish='EX'">
                            <option value="EX">EX</option>
                            <option value="VG">VG</option>
                            <option value="G">G</option>
                            <option value="Fair">Fair</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 对称: </label>

                    <div class="col-sm-9">
                        <select class="" name="symmetry"
                            ng-model="formData.symmetry"
                            ng-init="formData.symmetry='EX'">
                            <option value="EX">EX</option>
                            <option value="VG">VG</option>
                            <option value="G">G</option>
                            <option value="Fair">Fair</option>
                        </select>
                    </div>
                </div>


                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right"  for="form-field-1"> 产品图片: </label>

                    <div class="col-sm-9" id="fixfile">
                        <input type="file" id="id-input-file-1" multiple />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 珠宝试戴图片: </label>

                    <div class="col-sm-9">
                        <input type="file" id="id-input-file-2" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 产品视频: </label>

                    <div class="col-sm-9">
                        <input type="file" id="id-input-file-3" ng-model="formData.videoAdds" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 商品详情: </label>

                    <div class="col-sm-9">
                        <div class="wysiwyg-editor" id="editor1"></div>
                    </div>
                </div>
                <div class="clearfix form-actions">
                    <div class="col-md-offset-1 col-md-9">
                        <button class="btn btn-info" type="submit">
							<i class="ace-icon fa fa-check bigger-110"></i>
							提交
						</button> &nbsp; &nbsp; &nbsp;
                        <button class="btn" type="reset">
							<i class="ace-icon fa fa-undo bigger-110"></i>
							重置
						</button>
                    </div>
                </div>
            </form>

        </div>
        <!-- /.col -->
    </div>
    <!-- /.row -->
</div>
<!-- /.page-content -->
<style>
    div.file-actions .file-footer-buttons .kv-file-upload{
        display:none;
    }
    div.file-actions .file-upload-indicator{
        display:none;
    }
    .file-drop-zone-title{
        padding:0;
    }
    .fix-input{
        padding-top:7px;
    }

</style>

<script type="text/javascript">
    $(function() {
        $('#id-input-file-1').fileinput({
            language: 'zh', //设置语言
            uploadUrl: "/api/admin/uploadGoodsImage", //上传的地址
            allowedFileExtensions : ['jpg', 'png','gif','jpeg'],//接收的文件后缀,
            maxFileCount: 10,
            overwriteInitial: false,
            enctype: 'multipart/form-data',
            showUpload: false, //是否显示上传按钮
            showCaption: false,//是否显示标题
            browseClass: "btn btn-primary", //按钮样式
            previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
            msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
        });

        $(' #id-input-file-2 , #id-input-file-3, #id-input-file-4').ace_file_input({
            no_file: 'No File ...',
            btn_choose: 'Choose',
            btn_change: 'Change',
            droppable: false,
            onchange: null,
            thumbnail: false //| true | large
            //whitelist:'gif|png|jpg|jpeg'
            //blacklist:'exe|php'
            //onchange:''
            //
        });
    
        function showErrorAlert (reason, detail) {
            var msg='';
            if (reason==='unsupported-file-type') { msg = "Unsupported format " +detail; }
            else {
                //console.log("error uploading file", reason, detail);
            }
            $('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button>'+ 
             '<strong>File upload error</strong> '+msg+' </div>').prependTo('#alerts');
        }

        // $('#editor1').ace_wysiwyg();//this will create the default editor will all buttons

        //but we want to change a few buttons colors for the third style
        $('#editor1').ace_wysiwyg({
            toolbar:
            [
                'font',
                null,
                'fontSize',
                null,
                {name:'bold', className:'btn-info'},
                {name:'italic', className:'btn-info'},
                {name:'strikethrough', className:'btn-info'},
                {name:'underline', className:'btn-info'},
                null,
                {name:'insertunorderedlist', className:'btn-success'},
                {name:'insertorderedlist', className:'btn-success'},
                {name:'outdent', className:'btn-purple'},
                {name:'indent', className:'btn-purple'},
                null,
                {name:'justifyleft', className:'btn-primary'},
                {name:'justifycenter', className:'btn-primary'},
                {name:'justifyright', className:'btn-primary'},
                {name:'justifyfull', className:'btn-inverse'},
                null,
                {name:'createLink', className:'btn-pink'},
                {name:'unlink', className:'btn-pink'},
                null,
                {name:'insertImage', className:'btn-success'},
                null,
                'foreColor',
                null,
                {name:'undo', className:'btn-grey'},
                {name:'redo', className:'btn-grey'}
            ],
            'wysiwyg': {
                fileUploadError: showErrorAlert
            }
        }).prev().addClass('wysiwyg-style2');

        

        

        //RESIZE IMAGE
        
        //Add Image Resize Functionality to Chrome and Safari
        //webkit browsers don't have image resize functionality when content is editable
        //so let's add something using jQuery UI resizable
        //another option would be opening a dialog for user to enter dimensions.
        if ( typeof jQuery.ui !== 'undefined' && ace.vars['webkit'] ) {
            
            var lastResizableImg = null;
            function destroyResizable() {
                if(lastResizableImg == null) return;
                lastResizableImg.resizable( "destroy" );
                lastResizableImg.removeData('resizable');
                lastResizableImg = null;
            }

            var enableImageResize = function() {
                $('.wysiwyg-editor')
                .on('mousedown', function(e) {
                    var target = $(e.target);
                    if( e.target instanceof HTMLImageElement ) {
                        if( !target.data('resizable') ) {
                            target.resizable({
                                aspectRatio: e.target.width / e.target.height,
                            });
                            target.data('resizable', true);
                            
                            if( lastResizableImg != null ) {
                                //disable previous resizable image
                                lastResizableImg.resizable( "destroy" );
                                lastResizableImg.removeData('resizable');
                            }
                            lastResizableImg = target;
                        }
                    }
                })
                .on('click', function(e) {
                    if( lastResizableImg != null && !(e.target instanceof HTMLImageElement) ) {
                        destroyResizable();
                    }
                })
                .on('keydown', function() {
                    destroyResizable();
                });
            }

            enableImageResize();
        }
    })
</script>
